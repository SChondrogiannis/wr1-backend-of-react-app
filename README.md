This setup is a good node example if you remove the global variables logic. 

This project was designed and written for learning purposes and never the purpose of it was to become example for a rea app configuration. 